<style>
  .test_obj {
    background: linear-gradient(
        to right,
        rgba(190, 41, 41, 0.3) 3px,
        rgba(82, 10, 10, 0.5) 5px,
        rgba(255, 255, 255, 0.25) 7px,
        rgba(255, 255, 255, 0.25) 10px,
        transparent 12px,
        transparent 16px,
        rgba(255, 255, 255, 0.25) 20px,
        transparent 22px
      ),
      url("/images/book.png");
    box-shadow: 0 0 5px -1px rgb(152, 13, 13),
      inset -1px 1px 2px rgba(224, 9, 9, 0.5);
    border-radius: 5px;
    width: 200px;
    height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin: 10px 50px 10px 50px;
    cursor: pointer;
    background-size: 150% 150%;
    background-position: center;
  }
  .table-title {
    background-color: aliceblue;
   
    font-size: 34px; /* 원하는 글자 크기로 변경 */
  }
  .d-flex {
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
  }
</style>
<html xmlns:th="http://www.thymeleaf.org"></html>
<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}" />
<div class="container my-3">
 
</div>

  <table class="table">
    <thead class="table-dark">
      <tr class="table-title">
        <th><a href="#" id="wishlistLink">robot703의 wishlist</a>
          <div class="input-group">
            <input type="text" id="search_kw" class="form-control" th:value="${kw}">
            <button class="btn btn-outline-secondary" type="button" id="btn_search">찾기</button>
        </th>
   
      </tr>
    </thead>
    <tbody>
      <tr th:each="rowIndex : ${#numbers.sequence(0,2)}">
        <td>
          <div class="d-flex">
            <div
              class="test_obj"
              th:each="colIndex : ${#numbers.sequence(0,3)}"
              th:if="${#lists.size(paging.content) > rowIndex * 4 + colIndex}"
              th:text="${paging.content[rowIndex * 4 + colIndex].bookname}"
              th:date="${paging.content[rowIndex * 4 + colIndex].bookdate}"
              th:content="${paging.content[rowIndex * 4 + colIndex].bookcontent}"
            ></div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  
<div th:if="${!paging.isEmpty()}">
  <ul class="pagination justify-content-center">
      <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
          <a class="page-link" href="javascript:void(0)" th:data-page="${paging.number-1}">
              <span>이전</span>
          </a>
      </li>
      <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
          th:if="${page >= paging.number-5 and page <= paging.number+5}"
          th:classappend="${page == paging.number} ? 'active'" 
          class="page-item">
          <a th:text="${page}" class="page-link" href="javascript:void(0)" th:data-page="${page}"></a>
      </li>
      <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
          <a class="page-link" href="javascript:void(0)" th:data-page="${paging.number+1}">
              <span>다음</span>
          </a>
      </li>
  </ul>
</div>
<!-- 페이징처리 끝 -->
<form th:action="@{/bookstore/list}" method="get" id="searchForm">
  <input type="hidden" id="kw" name="kw" th:value="${kw}">
  <input type="hidden" id="page" name="page" th:value="${paging.number}">
</form>
</div>
</div>

<script layout:fragment="script" type='text/javascript'>
    const page_elements = document.getElementsByClassName("page-link");
    Array.from(page_elements).forEach(function(element) {
        element.addEventListener('click', function() {
            document.getElementById('page').value = this.dataset.page;
            document.getElementById('searchForm').submit();
        });
    });
    const btn_search = document.getElementById("btn_search");
    btn_search.addEventListener('click', function() {
        document.getElementById('kw').value = document.getElementById('search_kw').value;
        document.getElementById('page').value = 0;  // 검색버튼을 클릭할 경우 0페이지부터 조회한다.
        document.getElementById('searchForm').submit();
    });
</script>
<script>
  document.getElementById("wishlistLink").addEventListener("click", function(event) {
      event.preventDefault(); // 이벤트의 기본 동작인 링크 이동을 막습니다.
      window.location.href = "http://localhost:8080/bookstore/list?kw=&page=0"; // 원하는 URL로 이동합니다.
  });
</script>




<div
  class="modal fade"
  id="bookModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="bookModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="bookModalLabel">
          <p id="bookModalText"></p>
          <small id="bookModalDate"></small>
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <p id="bookModalContent"></p>
      </div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  $(document).ready(function () {
    $(".test_obj").click(function () {
      var bookName = $(this).text();
      var bookDate = $(this).attr("date");
      var bookContent = $(this).attr("content");
      $("#bookModalText").text(bookName);
      $("#bookModalDate").text("작성일시: " + bookDate);
      $("#bookModalContent").text("책내용: " + bookContent);

      // Additional code to fetch and display other book details if needed
      $("#bookModal").modal("show");
    });
  });
</script>
