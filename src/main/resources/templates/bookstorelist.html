<style>
  .test_obj {
    background: linear-gradient(
        to right,
        rgba(190, 41, 41, 0.3) 3px,
        rgba(82, 10, 10, 0.5) 5px,
        rgba(255, 255, 255, 0.25) 7px,
        rgba(255, 255, 255, 0.25) 10px,
        transparent 12px,
        transparent 16px,
        rgba(255, 255, 255, 0.25) 20px,
        transparent 22px
      ),
      url("/images/book.png");
    box-shadow: 0 0 5px -1px rgb(152, 13, 13),
      inset -1px 1px 2px rgba(224, 9, 9, 0.5);
    border-radius: 5px;
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin: 30px;
    cursor: pointer;
    background-size: 150% 150%;
    background-position: center;
  }
  .d-flex {
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
  }
</style>
<html xmlns:th="http://www.thymeleaf.org"></html>
<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}" />
<div class="container my-3">
  <table class="table">
    <thead class="table-dark">
      <tr style="height: 50px">
        <th th:with="progressValue=${#lists.size(bookList)*10}">
          <div class="progress" style="height: 30px">
            <div
              class="progress-bar"
              role="progressbar"
              aria-valuenow="${#lists.size(bookList)*10}"
              aria-valuemin="0"
              aria-valuemax="100"
              th:style="'width: ' + ${progressValue} + '%; height: 100%;'"
            >
              <h2 th:text="${progressValue}"></h2>
            </div>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr
        th:each="rowIndex : ${#numbers.sequence(0, ((#lists.size(bookList) - 1) / 4))}"
      >
        <td>
          <div class="d-flex">
            <div
              class="test_obj"
              th:each="colIndex : ${#numbers.sequence(0, 3)}"
              th:if="${#lists.size(bookList) > rowIndex * 4 + colIndex}"
              th:text="${bookList[rowIndex * 4 + colIndex].bookname}"
              th:date="${bookList[rowIndex * 4 + colIndex].bookdate}"
              th:content="${bookList[rowIndex * 4 + colIndex].bookcontent}"
            ></div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div
  class="modal fade"
  id="bookModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="bookModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="bookModalLabel">
          <p id="bookModalText"></p>
          <small id="bookModalDate"></small>
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <p id="bookModalContent"></p>
      </div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  $(document).ready(function () {
    $(".test_obj").click(function () {
      var bookName = $(this).text();
      var bookDate = $(this).attr("date");
      var bookContent = $(this).attr("content");
      $("#bookModalText").text(bookName);
      $("#bookModalDate").text("작성일시: " + bookDate);
      $("#bookModalContent").text("책내용: " + bookContent);

      // Additional code to fetch and display other book details if needed
      $("#bookModal").modal("show");
    });
  });
</script>
